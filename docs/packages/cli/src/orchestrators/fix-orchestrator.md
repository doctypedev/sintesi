# Fix-orchestrator

Auto-generated documentation via Doctype.


## API Reference

### codeRefString

<!-- doctype:start id="27c92952-5eba-4c6a-ab61-0d9c16cd307e" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#codeRefString" -->
**codeRefString** - Documentation needs generation

Current signature:
```typescript
codeRefString = `${entry.codeRef.filePath}#${entry.codeRef.symbolName}`
```

*This content is a placeholder. Run 'doctype generate' with a valid AI API key to generate full documentation.*
<!-- doctype:end id="27c92952-5eba-4c6a-ab61-0d9c16cd307e" -->


### anchors

<!-- doctype:start id="cdc06322-17e4-42b2-bd44-6f515a8906c7" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#anchors" -->
**anchors** - Documentation needs generation

Current signature:
```typescript
anchors = extractAnchors(docFilePath,  content).anchors
```

*This content is a placeholder. Run 'doctype generate' with a valid AI API key to generate full documentation.*
<!-- doctype:end id="cdc06322-17e4-42b2-bd44-6f515a8906c7" -->


### content

<!-- doctype:start id="ab43c9de-6fb4-4002-8a8e-a598f8862d3d" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#content" -->
**content** - Documentation needs generation

Current signature:
```typescript
content = readFileSync(docFilePath,  'utf-8')
```

*This content is a placeholder. Run 'doctype generate' with a valid AI API key to generate full documentation.*
<!-- doctype:end id="ab43c9de-6fb4-4002-8a8e-a598f8862d3d" -->


### anchorExists

<!-- doctype:start id="91931990-6104-4b13-9192-71da7d8ed0ad" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#anchorExists" -->
**anchorExists** - Documentation needs generation

Current signature:
```typescript
anchorExists = false
```

*This content is a placeholder. Run 'doctype generate' with a valid AI API key to generate full documentation.*
<!-- doctype:end id="91931990-6104-4b13-9192-71da7d8ed0ad" -->


### fs

<!-- doctype:start id="d4a868f2-0ad2-43f6-bf65-3208740c2094" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#fs" -->
**fs** - Documentation needs generation

Current signature:
```typescript
fs = await import('fs')
```

*This content is a placeholder. Run 'doctype generate' with a valid AI API key to generate full documentation.*
<!-- doctype:end id="d4a868f2-0ad2-43f6-bf65-3208740c2094" -->


### dir

<!-- doctype:start id="ddc2a5b1-2be3-4aa8-9067-73d5d3167940" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#dir" -->
**dir** - Documentation needs generation

Current signature:
```typescript
dir = dirname(docFilePath)
```

*This content is a placeholder. Run 'doctype generate' with a valid AI API key to generate full documentation.*
<!-- doctype:end id="ddc2a5b1-2be3-4aa8-9067-73d5d3167940" -->


### inserter

<!-- doctype:start id="d84269c7-2f58-4698-bcdd-e4c6a7bd0e99" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#inserter" -->
**inserter** - Documentation needs generation

Current signature:
```typescript
inserter = new MarkdownAnchorInserter()
```

*This content is a placeholder. Run 'doctype generate' with a valid AI API key to generate full documentation.*
<!-- doctype:end id="d84269c7-2f58-4698-bcdd-e4c6a7bd0e99" -->


### commitResult

<!-- doctype:start id="9d988cd2-8e2a-48be-832c-6a8f54f8fe65" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#commitResult" -->
TODO: Add documentation for this symbol
<!-- doctype:end id="9d988cd2-8e2a-48be-832c-6a8f54f8fe65" -->


### symbolNames

<!-- doctype:start id="af129f9a-ad2f-4e59-9e16-f79241de19a7" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#symbolNames" -->
TODO: Add documentation for this symbol
<!-- doctype:end id="af129f9a-ad2f-4e59-9e16-f79241de19a7" -->


### fix

<!-- doctype:start id="832143c1-c15b-4ca4-a333-7b3b5dfe175d" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#fix" -->
TODO: Add documentation for this symbol
<!-- doctype:end id="832143c1-c15b-4ca4-a333-7b3b5dfe175d" -->


### modifiedFiles

<!-- doctype:start id="f0bfd9d5-5dca-4ef6-8ae7-975c47fca113" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#modifiedFiles" -->
TODO: Add documentation for this symbol
<!-- doctype:end id="f0bfd9d5-5dca-4ef6-8ae7-975c47fca113" -->


### gitHelper

<!-- doctype:start id="e1fd02f7-5c42-4938-8216-6b6ebc822832" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#gitHelper" -->
TODO: Add documentation for this symbol
<!-- doctype:end id="e1fd02f7-5c42-4938-8216-6b6ebc822832" -->


### fixes

<!-- doctype:start id="f04c02ab-e6c2-44cb-aca6-857cf5ce061d" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#fixes" -->
TODO: Add documentation for this symbol
<!-- doctype:end id="f04c02ab-e6c2-44cb-aca6-857cf5ce061d" -->


### msg

<!-- doctype:start id="6f734921-e844-4e8c-933f-03bb9517c4c7" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#msg" -->
TODO: Add documentation for this symbol
<!-- doctype:end id="6f734921-e844-4e8c-933f-03bb9517c4c7" -->


### newHash

<!-- doctype:start id="230032b5-7d42-4162-994d-449c2d67362e" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#newHash" -->
TODO: Add documentation for this symbol
<!-- doctype:end id="230032b5-7d42-4162-994d-449c2d67362e" -->


### result

<!-- doctype:start id="f54c7443-f4e9-40b2-a18b-8b9e0ebf1d9b" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#result" -->
**result** - Documentation needs generation

Current signature:
```typescript
result
```

*This content is a placeholder. Run 'doctype generate' with a valid AI API key to generate full documentation.*
<!-- doctype:end id="f54c7443-f4e9-40b2-a18b-8b9e0ebf1d9b" -->


### writeToFile

<!-- doctype:start id="79feea05-e483-406b-ae35-1dfd74eab57d" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#writeToFile" -->
TODO: Add documentation for this symbol
<!-- doctype:end id="79feea05-e483-406b-ae35-1dfd74eab57d" -->


### response

<!-- doctype:start id="9ea64bd5-27ab-43c8-baa5-e6a1ab48e73a" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#response" -->
TODO: Add documentation for this symbol
<!-- doctype:end id="9ea64bd5-27ab-43c8-baa5-e6a1ab48e73a" -->


### request

<!-- doctype:start id="fe9e28b5-da35-4b8c-b898-27bfc5025fbd" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#request" -->
TODO: Add documentation for this symbol
<!-- doctype:end id="fe9e28b5-da35-4b8c-b898-27bfc5025fbd" -->


### anchor

<!-- doctype:start id="604368af-aef3-472e-b35a-e6c304cf711b" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#anchor" -->
TODO: Add documentation for this symbol
<!-- doctype:end id="604368af-aef3-472e-b35a-e6c304cf711b" -->


### extractionResult

<!-- doctype:start id="4b494a35-722a-4a64-9ca8-a80bb5d5e7f0" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#extractionResult" -->
TODO: Add documentation for this symbol
<!-- doctype:end id="4b494a35-722a-4a64-9ca8-a80bb5d5e7f0" -->


### docContent

<!-- doctype:start id="736a2f11-6313-4701-a45e-e5b0491aaea7" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#docContent" -->
TODO: Add documentation for this symbol
<!-- doctype:end id="736a2f11-6313-4701-a45e-e5b0491aaea7" -->


### currentMarkdownContent

<!-- doctype:start id="2d8d8a5c-2647-4e30-b749-c7c3d48d2ff1" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#currentMarkdownContent" -->
TODO: Add documentation for this symbol
<!-- doctype:end id="2d8d8a5c-2647-4e30-b749-c7c3d48d2ff1" -->


### newContent

<!-- doctype:start id="43b88be9-db82-4e07-bb2d-754ce3c0daa0" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#newContent" -->
TODO: Add documentation for this symbol
<!-- doctype:end id="43b88be9-db82-4e07-bb2d-754ce3c0daa0" -->


### docFilePath

<!-- doctype:start id="df9de851-36ab-4c60-8f85-849a9cee38f0" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#docFilePath" -->
TODO: Add documentation for this symbol
<!-- doctype:end id="df9de851-36ab-4c60-8f85-849a9cee38f0" -->


### processTask

<!-- doctype:start id="ed85564a-da49-486d-86d4-6ddd5f35dbb7" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#processTask" -->
**processTask** - Documentation needs generation

Current signature:
```typescript
processTask = async(drift: DriftInfo): Promise<FixDetail> =>{const{entry,  currentSignature,  oldSignature}= drift;  const docFilePath = resolve(projectBase,  entry.docRef.filePath);  try{let newContent: string;  if(useAI && aiAgent){try{let currentMarkdownContent = '';  if(existsSync(docFilePath)){const docContent = readFileSync(docFilePath,  'utf-8');  const extractionResult = extractAnchors(docFilePath,  docContent);  const anchor = extractionResult.anchors.find((a: DoctypeAnchor)=> a.id === entry.id);  if(anchor){currentMarkdownContent = anchor.content; }}newContent = await retry(async()=>{if(oldSignature){const request: DocumentationRequest ={symbolName: entry.codeRef.symbolName,  oldSignature,  newSignature: currentSignature,  oldDocumentation: currentMarkdownContent,  context: entry.codeRef.filePath ?{filePath: entry.codeRef.filePath}: undefined,  prompt: PromptBuilder.buildStructuredSinglePrompt(entry.codeRef.symbolName,  currentSignature.signatureText,  currentMarkdownContent),  systemPrompt: PromptBuilder.buildStructuredSystemPrompt()};  const response = await aiAgent!.generateDocumentation(request);  return response.content; }else{const request: DocumentationRequest ={symbolName: entry.codeRef.symbolName,  oldSignature: currentSignature,  newSignature: currentSignature,  oldDocumentation: '',  prompt: PromptBuilder.buildStructuredSinglePrompt(entry.codeRef.symbolName,  currentSignature.signatureText,  ''),  systemPrompt: PromptBuilder.buildStructuredSystemPrompt()};  const response = await aiAgent!.generateDocumentation(request);  return response.content; }}, {retries: 3,  onRetry:(err,  attempt)=>{logger.debug(`Retry ${attempt}/3 for ${entry.codeRef.symbolName}: ${err.message}`); }}); }catch(aiError){const errorMsg = aiError instanceof Error ? aiError.message: String(aiError);  logger.error(`AI generation failed for ${entry.codeRef.symbolName}after retries: ${errorMsg}`);  newContent = generatePlaceholderContent(entry.codeRef.symbolName,  currentSignature.signatureText); }}else{newContent = generatePlaceholderContent(entry.codeRef.symbolName,  currentSignature.signatureText); }return await fileMutex.run(docFilePath,  async()=>{try{const dir = dirname(docFilePath);  if(!existsSync(dir)){try{const fs = await import('fs');  fs.mkdirSync(dir, {recursive: true}); }catch(e){}}let anchorExists = false;  if(existsSync(docFilePath)){const content = readFileSync(docFilePath,  'utf-8');  const anchors = extractAnchors(docFilePath,  content).anchors;  anchorExists = anchors.some((a: DoctypeAnchor)=> a.id === entry.id); }const writeToFile = !options.dryRun;  let result;  if(anchorExists){result = injector.injectIntoFile(docFilePath,  entry.id,  newContent,  writeToFile); }else{const codeRefString = `${entry.codeRef.filePath}#${entry.codeRef.symbolName}`;  result = inserter.insertIntoFile(docFilePath,  codeRefString, {createSection: true,  placeholder: newContent,  anchorId: entry.id},  writeToFile); }if(result.success){if(!options.dryRun){const newHash = currentSignature.hash!;  if(mapManager.getEntryById(entry.id)){mapManager.updateEntry(entry.id, {codeSignatureHash: newHash,  codeSignatureText: currentSignature.signatureText, }); }else{mapManager.addEntry(entry); }mapManager.save(); }successCount++;  return{id: entry.id,  symbolName: entry.codeRef.symbolName,  codeFilePath: entry.codeRef.filePath,  docFilePath: entry.docRef.filePath,  success: true,  newContent: newContent, }; }else{failCount++;  logger.error(`Failed to inject ${entry.codeRef.symbolName}: ${result.error}`);  return{id: entry.id,  symbolName: entry.codeRef.symbolName,  codeFilePath: entry.codeRef.filePath,  docFilePath: entry.docRef.filePath,  success: false,  error: result.error, }; }}catch(e){failCount++;  const msg = e instanceof Error ? e.message: String(e);  logger.error(`Error writing ${entry.codeRef.symbolName}: ${msg}`);  return{id: entry.id,  symbolName: entry.codeRef.symbolName,  codeFilePath: entry.codeRef.filePath,  docFilePath: entry.docRef.filePath,  success: false,  error: msg, }; }}); }catch(error){failCount++;  const errorMsg = error instanceof Error ? error.message: String(error);  return{id: entry.id,  symbolName: entry.codeRef.symbolName,  codeFilePath: entry.codeRef.filePath,  docFilePath: entry.docRef.filePath,  success: false,  error: errorMsg, }; }}
```

*This content is a placeholder. Run 'doctype generate' with a valid AI API key to generate full documentation.*
<!-- doctype:end id="ed85564a-da49-486d-86d4-6ddd5f35dbb7" -->


### s

<!-- doctype:start id="1e38c4a1-f12e-4d94-9d71-da3f4d6099a6" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#s" -->
TODO: Add documentation for this symbol
<!-- doctype:end id="1e38c4a1-f12e-4d94-9d71-da3f4d6099a6" -->


### failCount

<!-- doctype:start id="0f274f7b-4f2e-45c9-b742-d6aebf29eced" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#failCount" -->
TODO: Add documentation for this symbol
<!-- doctype:end id="0f274f7b-4f2e-45c9-b742-d6aebf29eced" -->


### successCount

<!-- doctype:start id="f6aafe1d-fe00-42c2-bf2b-a669c1acece4" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#successCount" -->
TODO: Add documentation for this symbol
<!-- doctype:end id="f6aafe1d-fe00-42c2-bf2b-a669c1acece4" -->


### injector

<!-- doctype:start id="dff37c8d-e0b6-45ba-bfa0-586f9d8ceb16" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#injector" -->
TODO: Add documentation for this symbol
<!-- doctype:end id="dff37c8d-e0b6-45ba-bfa0-586f9d8ceb16" -->


### fileMutex

<!-- doctype:start id="14bf5340-2887-45ef-a98c-8aeb7999f949" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#fileMutex" -->
TODO: Add documentation for this symbol
<!-- doctype:end id="14bf5340-2887-45ef-a98c-8aeb7999f949" -->


### projectBase

<!-- doctype:start id="fa158ae5-8530-4e22-8d45-2a9b75bf47f4" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#projectBase" -->
TODO: Add documentation for this symbol
<!-- doctype:end id="fa158ae5-8530-4e22-8d45-2a9b75bf47f4" -->


### mapPath

<!-- doctype:start id="cc3d71e2-8b8e-44b0-8ecc-c36f844ca66b" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#mapPath" -->
TODO: Add documentation for this symbol
<!-- doctype:end id="cc3d71e2-8b8e-44b0-8ecc-c36f844ca66b" -->


### errorMsg

<!-- doctype:start id="ae431c40-8185-4425-8903-97bcc8d23bce" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#errorMsg" -->
TODO: Add documentation for this symbol
<!-- doctype:end id="ae431c40-8185-4425-8903-97bcc8d23bce" -->


### isConnected

<!-- doctype:start id="10a2e01a-9ad3-4658-99a4-8f5f7ca85edc" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#isConnected" -->
TODO: Add documentation for this symbol
<!-- doctype:end id="10a2e01a-9ad3-4658-99a4-8f5f7ca85edc" -->


### useAI

<!-- doctype:start id="e79f7399-06bd-4cf2-add8-ea497f1bcf0b" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#useAI" -->
TODO: Add documentation for this symbol
<!-- doctype:end id="e79f7399-06bd-4cf2-add8-ea497f1bcf0b" -->


### aiAgent

<!-- doctype:start id="724f419a-725d-4925-81ce-bd4c005d7a6c" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#aiAgent" -->
TODO: Add documentation for this symbol
<!-- doctype:end id="724f419a-725d-4925-81ce-bd4c005d7a6c" -->



### executeFixes

<!-- doctype:start id="e5fc2f4d-02d7-44e6-8dff-119ea7037ead" code_ref="packages/cli/src/orchestrators/fix-orchestrator.ts#executeFixes" -->
TODO: Add documentation for this symbol
<!-- doctype:end id="e5fc2f4d-02d7-44e6-8dff-119ea7037ead" -->
